/**
 * Mobile-optimized styles for SiYuan Recurring Tasks Plugin
 * Breakpoints: Mobile (<768px), Tablet (768-1024px), Desktop (>1024px)
 */

// Breakpoint variables
$mobile: 768px;
$tablet: 1024px;

// Mobile-first responsive styles
@media (max-width: $mobile) {
  // Dashboard layout adjustments
  .task-dashboard {
    // Stack layout instead of columns
    grid-template-columns: 1fr !important;
    padding: 8px;
    
    // Remove sidebar on mobile
    .dashboard__sidebar {
      display: none;
    }
    
    .dashboard__main {
      padding: 0;
    }
  }

  // Task items with larger touch targets
  .task-item,
  .task-row {
    min-height: 44px; // Minimum iOS touch target
    padding: 12px;
    margin-bottom: 8px;
    
    // Ensure text is readable
    font-size: 16px; // Prevent zoom on iOS
    
    // Touch-friendly spacing
    .task-item__checkbox {
      width: 24px;
      height: 24px;
      margin-right: 12px;
    }
    
    .task-item__content {
      flex: 1;
      min-width: 0; // Allow text truncation
    }
    
    .task-item__actions {
      margin-left: 8px;
      
      button {
        min-width: 44px;
        min-height: 44px;
        padding: 10px;
      }
    }
  }

  // Hide advanced filters by default on mobile
  .filters-panel {
    display: none;
    
    &.expanded {
      display: block;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 1000;
      background: var(--b3-theme-background);
      padding: 16px;
      overflow-y: auto;
    }
  }

  // Task creation as bottom sheet instead of modal
  .task-editor-modal,
  .quick-add-overlay {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    top: auto;
    max-height: 90vh;
    border-radius: 16px 16px 0 0;
    transform: translateY(100%);
    transition: transform 0.3s ease;
    
    &.active {
      transform: translateY(0);
    }
  }

  // Form inputs - larger for mobile
  input[type="text"],
  input[type="date"],
  input[type="time"],
  select,
  textarea {
    font-size: 16px !important; // Prevent zoom on iOS
    padding: 12px;
    min-height: 44px;
  }

  // Buttons - larger touch targets
  button,
  .btn {
    min-height: 44px;
    padding: 12px 16px;
    font-size: 16px;
  }
}

// Tablet adjustments
@media (min-width: $mobile) and (max-width: $tablet) {
  .task-dashboard {
    grid-template-columns: 250px 1fr;
  }
}

// Touch-specific styles (any device with touch)
@media (hover: none) and (pointer: coarse) {
  // Increase all interactive element sizes
  button,
  a,
  .clickable {
    min-height: 44px;
    min-width: 44px;
  }

  // Add active/pressed states
  button:active,
  .clickable:active {
    opacity: 0.7;
    transform: scale(0.98);
  }
}
